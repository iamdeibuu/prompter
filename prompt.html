<body>
	<div id="prompt_container" style="height: 100%; overflow: auto; padding: 0px 2rem;">
		<p id="text_prompt" class="center center_text prompt_text unselectable"></p>
	</div>
</body>

<script type="text/javascript">
	document.addEventListener('DOMContentLoaded', function () {
		const urlParams = new URLSearchParams(window.location.search);
		const text = urlParams.get('text'); // Get 'text' parameter from URL

		if (text) {
			const formattedText = text.replace(/(?:\r\n|\r|\n|\+|\%20)/g, '<br>'); // Replace line breaks and URL encoding for spaces
			document.getElementById("text_prompt").innerHTML = decodeURIComponent(formattedText);
		} else {
			const fallbackText = localStorage.getItem('prompt_data'); // Fallback to local storage if no URL parameter
			if (fallbackText) {
				const formattedText = fallbackText.replace(/(?:\r\n|\r|\n)/g, '<br>');
				document.getElementById("text_prompt").innerHTML = formattedText;
			}
		}

		const ele = document.getElementById('prompt_container');
		let pos = { top: 0, left: 0, x: 0, y: 0 };

		const mouseDownHandler = function (e) {
			ele.style.userSelect = 'none';
			pos = {
				left: ele.scrollLeft,
				top: ele.scrollTop,
				x: e.clientX,
				y: e.clientY,
			};

			document.addEventListener('mousemove', mouseMoveHandler);
			document.addEventListener('mouseup', mouseUpHandler);
		};

		const mouseMoveHandler = function (e) {
			const dx = e.clientX - pos.x;
			const dy = e.clientY - pos.y;

			ele.scrollTop = pos.top - dy;
			ele.scrollLeft = pos.left - dx;
		};

		const mouseUpHandler = function () {
			ele.style.removeProperty('user-select');
			document.removeEventListener('mousemove', mouseMoveHandler);
			document.removeEventListener('mouseup', mouseUpHandler);
		};

		// Attach the handler
		ele.addEventListener('mousedown', mouseDownHandler);
	});
</script>

<style type="text/css">
	#prompt_container {
		cursor: url(images/dot.cur), auto;
	}

	.center {
		margin: auto;
		padding: 10px;
		width: 500px;
	}

	.center_text {
		margin: auto;
		padding: 10px;
		text-align: center;
	}

	body {
		background: linear-gradient(to right,
				#4abfff 0%,
				#b4e5fe 20%,
				#eef9ff 40%,
				#ffffff 50%,
				#eef9ff 60%,
				#b4e5fe 80%,
				#4abfff 100%);
		background-position: center;
		background-size: cover;
		position: absolute;
		top: 0px;
		left: 0px;
		width: 100%;
		height: 100%;
		overflow-x: hidden;
		overflow-y: hidden;
	}

	.prompt_text {
		font-size: 100px;
		font-family: Constantia, sans-serif;
		font-weight: bold;
		width: 90%;
	}
</style>